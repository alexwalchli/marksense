<html>
  <head>
    <title>Marksense Demo</title>
    <link rel="stylesheet" href="demo.css"></link>
    <script src="bundle.js"></script>
  </head>
  <body>
    <h5>Corpus</h5>
    <textarea id="code-corpus">
export const nodeCreated = (newNode) => {
  return {
    type: NODE_CREATED,
    nodeId: newNode.id,
    payload: newNode
  };
};

export const nodeUpdated = (updatedNode) => {
  return {
    type: NODE_UPDATED,
    nodeId: updatedNode.id,
    payload: updatedNode
  };
};

export const xplusy = (x, y) => {
  return x + y;
};

export const xplusy = (x, y, z) => {
  return x + y + z;
};
    </textarea>

    <h5>Input</h5>
    <p>Type 'exp'. Press right arrow for more detailed snippets. Left arrow for less detailed snippets</p>
    <textarea id="code-input"></textarea>

    <h5>Generated Code Snippet:</h5>
    <p id="snippet"></p>

    <script>
      function setSnippetSuggestions(snippets){
        var suggestionsEl = document.getElementById('snippet');
        suggestionsEl.innerHTML = snippets.map(s => s + '<br />');
      }

      window.onload = function(){
        var code = document.getElementById('code-corpus').innerHTML,
                   markSense = new MarkSense();

        markSense.generateSnippetTree(code);

        var suggestions = [];
        document.getElementById('code-input').onkeyup = function(e){
          
          var suggestionHtml = '';

          if(e.code === 'ArrowRight'){
            suggestions = markSense.getDeeperSnippet();
          } else if(e.code === 'ArrowLeft'){
            suggestions = markSense.getShallowerSnippet();
          } else if(e.code === 'ArrowDown'){
            suggestions = markSense.getSnippetBelow();
          } else if(e.code === 'ArrowUp'){
            suggestions = markSense.getSnippetAbove();
          } else {
            suggestions = markSense.search(document.getElementById('code-input').value);

            markSense.newRootSnippet(suggestions[0]);
          }

          setSnippetSuggestions(suggestions);
        }
      }

    </script>

  </body>
</html>