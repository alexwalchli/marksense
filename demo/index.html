<html>
  <head>
    <title>Marksense Demo</title>
    <link rel="stylesheet" href="demo.css"></link>
    <script src="bundle.js"></script>
  </head>
  <body>
    <h5>Corpus</h5>
    <textarea id="code-corpus">
export const removeChildNode = (nodeId, childId) => {
  return {
    type: REMOVE_CHILD_NODE,
    nodeId,
    payload: {
      childId
    }
  };
};
    </textarea>

    <h5>Input</h5>
    <textarea id="code-input"></textarea>

    <h5>Generated Code Snippet:</h5>
    <p id="snippet"></p>

    <script>
      // TODO: Make this actually do something. Bring in an intellisense UI. 

      window.onload = function(){
        var code = document.getElementById('code-corpus').innerHTML,
                   markSense = new MarkSense();

        markSense.generateSnippetSuggestionTree(code);

        var selectedSuggestionIndex = 0;
        var selectedSuggestionDepth = 0;
        document.getElementById('code-input').onkeyup = function(e){
          var suggestions = markSense.getSnippetSuggestions(e.currentTarget.value);
          var suggestionsEl = document.getElementById('snippet');

          if(e.code === 'ArrowRight'){
            suggestionsEl.innerHTML = suggestions[selectedSuggestionIndex].snippet + '<br />' + suggestions[selectedSuggestionIndex].next[selectedSuggestionDepth].code;
            selectedSuggestionDepth++;
          } else if(e.code === 'ArrowDown'){
            suggestionsEl.innerHTML = suggestions[selectedSuggestionIndex].snippet + '<br />' + suggestions[selectedSuggestionIndex].next[selectedSuggestionDepth].code;
            selectedSuggestionIndex++;
          } else {
            suggestionsEl.innerHTML = suggestions[selectedSuggestionIndex].snippet;
          }
        }
      }

    </script>

  </body>
</html>